/* CategoryProductDisplay.css - Modernized and Revamped */

:root {
  --primary-color: darkgreen; /* Main accent color */
  --secondary-color: #004d00; /* Darker accent color */
  --background-light: #f9f9f9; /* Light background for the page */
  --background-card: #ffffff; /* White for product cards */
  --text-dark: #333;
  --text-medium: #666;
  --border-light: #e0e0e0;
  --shadow-light: rgba(0, 0, 0, 0.08);
  --shadow-medium: rgba(0, 0, 0, 0.12);
  --radius-soft: 8px;
  --gap-md: 20px;
  --gap-lg: 30px;
  --product-card-width: 200px; /* Base width for product cards */
}

.cpd-main-layout {
  display: flex; /* Revert to flex for sidebar and main content */
  min-height: calc(100vh - var(--navbar-height, 60px) - var(--footer-height, 100px));
  background-color: var(--background-light);
  padding: var(--gap-lg);
  gap: var(--gap-lg);
  box-sizing: border-box;
  margin-top: 60px;
}

/* Sidebar Styling */
.cpd-sidebar {
  flex-shrink: 0;
  width: 250px;
  background-color: var(--background-card);
  border-radius: var(--radius-soft);
  box-shadow: 0 4px 12px var(--shadow-light);
  padding: var(--gap-md);
  box-sizing: border-box;
}

.cpd-sidebar h2 {
  font-size: 1.6em;
  color: var(--primary-color);
  margin-bottom: var(--gap-md);
  padding-bottom: 10px;
  border-bottom: 2px solid var(--border-light);
}

.cpd-category-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.cpd-category-item {
  padding: 12px 10px;
  color: var(--text-dark);
  font-size: 1.1em;
  cursor: pointer;
  border-radius: var(--radius-soft);
  transition: background-color 0.2s ease, color 0.2s ease;
  margin-bottom: 5px;
  display: flex;
  align-items: center;
}

.cpd-category-item:hover {
  background-color: var(--primary-color);
  color: white;
}

.cpd-category-item.active {
  background-color: var(--primary-color);
  color: white;
  font-weight: 600;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}

/* Content Area Styling */
.cpd-content-area {
  flex-grow: 1;
  background-color: var(--background-card);
  border-radius: var(--radius-soft);
  box-shadow: 0 4px 12px var(--shadow-light);
  padding: var(--gap-lg);
  box-sizing: border-box;
}

.cpd-content-title {
  font-size: 2em;
  color: var(--text-dark);
  margin-bottom: var(--gap-lg);
  text-align: center;
  position: relative;
  padding-bottom: 15px;
}

.cpd-content-title::after {
  content: '';
  position: absolute;
  left: 50%;
  bottom: 0;
  transform: translateX(-50%);
  width: 80px;
  height: 3px;
  background-color: var(--primary-color);
  border-radius: 2px;
}

/* Product Scroll Container */
.cpd-product-scroll-container {
  max-height: 800px; /* Adjust this height to show ~10 products (2 rows of 5) */
  overflow-y: auto; /* Enable vertical scrolling */
  padding-right: 15px; /* Space for scrollbar */
  scrollbar-width: thin; /* Firefox */
  scrollbar-color: var(--primary-color) var(--border-light); /* Firefox */
}

/* Webkit scrollbar styling */
.cpd-product-scroll-container::-webkit-scrollbar {
  width: 8px;
}

.cpd-product-scroll-container::-webkit-scrollbar-track {
  background: var(--border-light);
  border-radius: 10px;
}

.cpd-product-scroll-container::-webkit-scrollbar-thumb {
  background-color: var(--primary-color);
  border-radius: 10px;
  border: 2px solid var(--background-card);
}


/* Product Grid Styling */
.cpd-product-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(var(--product-card-width), 1fr));
  gap: var(--gap-md);
  padding-bottom: 10px; /* Add some padding at the bottom for scroll */
}

.cpd-product-card {
  background-color: var(--background-card);
  border-radius: var(--radius-soft);
  box-shadow: 0 2px 8px var(--shadow-light);
  padding: var(--gap-md);
  display: flex;
  flex-direction: column; /* Default to column for image, title, price */
  align-items: center;
  text-align: center;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  overflow: hidden;
  height: auto; /* Allow height to adjust based on content */
}

.cpd-product-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 6px 16px var(--shadow-medium);
}

.cpd-product-image {
  width: 100%;
  max-width: 180px;
  height: 150px;
  object-fit: contain;
  border-radius: var(--radius-soft);
  margin-bottom: 15px;
}

.cpd-product-title {
  font-size: 1.1em;
  color: var(--text-dark);
  font-weight: 600;
  margin-bottom: 8px;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}

.cpd-product-price {
  font-size: 1.2em;
  color: var(--primary-color);
  font-weight: 700;
  margin-top: auto;
}

.cpd-no-products {
  grid-column: 1 / -1;
  text-align: center;
  color: var(--text-medium);
  font-size: 1.2em;
  padding: var(--gap-lg);
}

/* Loading Spinner */
.cpd-loading-spinner {
  border: 4px solid var(--border-light);
  border-top: 4px solid var(--primary-color);
  border-radius: 50%;
  width: 40px;
  height: 40px;
  animation: spin 1s linear infinite;
  margin: 50px auto;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}


/* Responsive Adjustments */
@media (max-width: 1024px) {
  .cpd-main-layout{
      margin-top: 100px;
  }
  .cpd-sidebar {
      width: 200px;
  }
  .cpd-product-grid {
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      --product-card-width: 180px; /* Adjust variable */
  }
  .cpd-product-scroll-container {
    max-height: 700px; /* Adjust for smaller screens */
  }
}

@media (max-width: 768px) {
  .cpd-main-layout {
      flex-direction: column;
      padding: var(--gap-md);
      margin-top: 150px;
  }
  .cpd-sidebar {
      width: 100%;
      margin-bottom: var(--gap-md);
  }
  .cpd-content-area {
      padding: var(--gap-md);
  }
  .cpd-product-grid {
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 15px;
      --product-card-width: 160px;
  }
  .cpd-content-title {
      font-size: 1.8em;
  }
  .cpd-sidebar h2 {
      text-align: center;
  }
  .cpd-category-list {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
  }
  .cpd-category-item {
      padding: 8px 12px;
      margin: 5px;
      font-size: 1em;
  }
  .cpd-product-scroll-container {
    max-height: 600px; /* Further adjust for tablets */
    padding-right: 8px; /* Smaller scrollbar space */
  }
  .cpd-product-scroll-container::-webkit-scrollbar {
    width: 6px;
  }
}

@media (max-width: 480px) {
  .cpd-main-layout {
      padding: 10px;
      margin-top: 120px;
  }
  .cpd-sidebar {
      padding: 10px;
  }
  .cpd-sidebar h2 {
      font-size: 1.4em;
  }
  .cpd-category-item {
      font-size: 0.9em;
      padding: 6px 10px;
  }
  .cpd-content-area {
      padding: 15px;
  }
  .cpd-content-title {
      font-size: 1.5em;
      margin-bottom: var(--gap-md);
  }
  .cpd-product-grid {
      grid-template-columns: 1fr; /* Single column on very small screens */
      gap: 10px;
      --product-card-width: 100%; /* Full width for cards */
  }
  .cpd-product-image {
      max-width: 120px;
      height: 100px;
      margin-bottom: 0; /* No margin bottom when horizontal */
  }
  .cpd-product-card {
      flex-direction: row; /* Horizontal layout for small screens */
      text-align: left;
      gap: 10px;
      padding: 10px;
      align-items: center; /* Vertically align items in the row */
  }
  .cpd-product-title, .cpd-product-price {
      margin: 0;
  }
  .cpd-product-title {
      flex-grow: 1; /* Allow title to take available space */
      -webkit-line-clamp: 2; /* Limit to 2 lines for title */
      font-size: 1em;
      /* Adjust order to be after image but before price if needed by adding a wrapper */
  }
  .cpd-product-price {
      font-size: 1em;
      white-space: nowrap; /* Keep price on one line */
      margin-left: auto; /* Push price to the right */
  }

  /* Specific structure for mobile: image, then name/price block */
  .cpd-product-card > img {
    order: 1; /* Image first */
  }

  .cpd-product-card > h4 {
    order: 2; /* Name second */
    margin-right: 10px; /* Space between name and price */
  }

  .cpd-product-card > p {
    order: 3; /* Price third */
    align-self: flex-end; /* Align price to bottom if space allows */
  }

  /* To get name and price stacked *under* the image on mobile if it were a column,
     we would need a wrapper div around name and price for column layout,
     but for the requested "image first and the name at the front and the price at the buttom of the name"
     in a row layout, the above order and flex-direction: row works. */
}